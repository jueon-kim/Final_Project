<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>ê¸€ì“°ê¸°</title>

    <style>
        section {
            max-width: 1400px;
        }

    </style>
</head>
<body>
<div th:include="/views/header"></div>
<section class="container mt-3">

    <form action="/post/save" method="post" onsubmit="regdate()" enctype="multipart/form-data">

        <div style="width: 768px; margin: auto">
            <br>
            <!-- ì‚¬ì§„ ë“¤ì–´ê°ˆê³³ -->
            <div>
                <div class="imge">
                    <label> ì´ë¯¸ì§€ì„ íƒ
                        <input type="file" style="display: none;" class="image" multiple onchange="previewImages(this)">
                    </label>
                </div>
            </div><br>


            <div class="mb-5">
                <input type="file" name="post_upLoadFile" id="post_upLoadFile" multiple>
            </div>
            <br>


            <br>
            <div>
                <input id="postTitle" name="post_title" class="form-control" required minlength="4" maxlength="50" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" style="width: 768px;">
            </div><br>

            <div>
                <select class="form-select" name="category_num" aria-label="Default select example">
                    <option value="1" selected>ì—¬ì„±ì˜ë¥˜</option>
                    <option value="2">ë‚¨ì„±ì˜ë¥˜</option>
                    <option value="3">ì‹ ë°œ</option>
                    <option value="4">ê°€ë°©/ì§€ê°‘</option>
                    <option value="5">ì‹œê³„</option>
                    <option value="6">ì¥¬ì–¼ë¦¬</option>
                    <option value="7">íŒ¨ì…˜ ì•¡ì„¸ì„œë¦¬</option>
                    <option value="8">ë””ì§€í„¸</option>
                    <option value="9">ê°€ì „ì œí’ˆ</option>
                    <option value="10">ìŠ¤í¬ì¸ /ë ˆì €</option>
                    <option value="11">ì°¨ëŸ‰/ì˜¤í† ë°”ì´</option>
                    <option value="12">ìŠ¤íƒ€êµ¿ì¦ˆ</option>
                    <option value="13">í‚¤ëœíŠ¸</option>
                    <option value="14">ì˜ˆìˆ /í¬ê·€/ìˆ˜ì§‘í’ˆ</option>
                    <option value="15">ìŒë°˜/ì•…ê¸°</option>
                    <option value="16">ë„ì„œ/í‹°ì¼“/ë¬¸êµ¬</option>
                    <option value="17">ë·°í‹°/ë¯¸ìš©</option>
                    <option value="18">ê°€êµ¬/ì¸í…Œë¦¬ì–´</option>
                    <option value="19">ìƒí™œ/ì£¼ë°©ìš©í’ˆ</option>
                    <option value="20">ê³µêµ¬/ì‚°ì—…ìš©í’ˆ</option>
                    <option value="21">ì‹í’ˆ</option>
                    <option value="22">ìœ ì•„ë™/ì¶œì‚°</option>
                    <option value="23">ë°˜ë ¤ë™ë¬¼ìš©í’ˆ</option>
                    <option value="24">ê¸°íƒ€</option>
                </select>
            </div><br>


            <!-- ê¸€ë‚´ìš© -->
            <div>
                <textarea id="post_content" name="post_content" class="form-control"
                          placeholder="- ìƒí’ˆëª…(ë¸Œëœë“œ)&#10;- êµ¬ë§¤ ì‹œê¸°&#10;- ì‚¬ìš© ê¸°ê°„&#10;- í•˜ì ì—¬ë¶€&#10;* ì‹¤ì œ ì´¬ì˜í•œ ì‚¬ì§„ê³¼ í•¨ê»˜ ìƒì„¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.&#10;* ì¹´ì¹´ì˜¤í†¡ ì•„ì´ë”” ì²¨ë¶€ ì‹œ ê²Œì‹œë¬¼ ì‚­ì œ ë° ì´ìš©ì œì¬ ì²˜ë¦¬ë  ìˆ˜ ìˆì–´ìš”.&#10;ì•ˆì „í•˜ê³  ê±´ì „í•œ ê±°ë˜í™˜ê²½ì„ ìœ„í•´ ê³¼í•™ê¸°ìˆ ì •ë³´í†µì‹ ë¶€, í•œêµ­ì¸í„°ë„·ì§„í¥ì›, ì¤‘ê³ ë‚˜ë¼ê°€ í•¨ê»˜í•©ë‹ˆë‹¤."
                          style="width: 768px; height: 200px;" maxlength="1000"></textarea>
            </div><br>

            <!--ê°€ê²© -->
            <div>
                <input id="post_price" name="post_price" class="form-control" placeholder="ğŸ’²íŒë§¤ê°€ê²©(ìˆ«ìë§Œ ì…ë ¥í•˜ì„¸ìš”)"
                       onKeyup="this.value=this.value.replace(/[^0-9]/g,'')">
            </div><br>

            <div>
                <p>ìƒí’ˆìƒíƒœ</p>
                <input type="radio" class="btn-check" name="post_productState" id="used" autocomplete="off" value="ì¤‘ê³ " checked>
                <label class="btn btn-outline-success" for="used">ì¤‘ê³ </label>

                <input type="radio" class="btn-check" name="post_productState" id="new" autocomplete="off" value="ìƒˆìƒí’ˆ">
                <label class="btn btn-outline-success" for="new">ìƒˆìƒí’ˆ</label>
            </div><br>


            <div>
                <p>ê±°ë˜ë°©ë²•</p>
                <input type="radio" class="btn-check" name="post_way" id="direct" autocomplete="off" value="ì§ê±°ë˜" checked>
                <label class="btn btn-outline-success" for="direct">ì§ê±°ë˜</label>

                <input type="radio" class="btn-check" name="post_way" id="post" autocomplete="off" value="íƒë°°">
                <label class="btn btn-outline-success" for="post">íƒë°°</label>

                <input type="radio" class="btn-check" name="post_way" id="both" autocomplete="off" value="ì§ê±°ë˜, íƒë°°">
                <label class="btn btn-outline-success" for="both">ì§ê±°ë˜, íƒë°°</label>
            </div><br>



            <div style="width: 768px; height: 400px; border: 3px red solid;">
                <p style="font-size: 20px;">ê±°ë˜ì¥ì†Œ</p>

                <div id="map" style="width: 764px; height: 300px; border: 3px red solid;">

                </div>

                <div>
                    <input id="location" name="post_location" th:value="${session.user.user_location}">
                    <input id="location2" name="post_location2" th:value="${session.user.user_location2}">
                </div>

            </div><br>
            <input type="hidden" name="post_regdate" id="post_regdate">
            <input type="hidden" name="post_saleState" value="íŒë§¤ì¤‘">
            <input type="text" class="hidden-field" th:value="${session.user.user_num}" name="user_num" id="user_num">


            <div style="display: flex; justify-content: center">

                <div style="justify-content: center">
                    <button type="submit" value="ë“±ë¡"
                            style="width: 100px; margin-left: 10px; background-color: transparent;">ë“±ë¡í•˜ê¸°
                    </button>
                </div>

                <div style="margin-left: 10px; justify-content: center;">
                    <button value="ì·¨ì†Œ" style="width: 100px; margin-left: 10px; background-color: transparent;">ì·¨ì†Œ
                    </button>
                </div>
            </div>


<!--            <footer>-->
<!--                <div th:include="/views/footer.html"></div>-->
<!--            </footer>-->
        </div>

    </form>

</section>


<script>
    /*    document.addEventListener('DOMContentLoaded', function () {
            // ëª¨ë“  li ìš”ì†Œì— í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€
            var liElements = document.querySelectorAll('ul li');

            liElements.forEach(function (li) {
                li.addEventListener('click', function () {
                    // í´ë¦­ëœ li ìš”ì†Œì˜ ì²« ë²ˆì§¸ ìì‹ì¸ checkbox ìš”ì†Œë¥¼ í† ê¸€
                    var checkbox = li.querySelector('.checkbox');
                    checkbox.checked = !checkbox.checked;

                    // ì„ íƒëœ ìƒíƒœì— ë”°ë¼ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€ ë˜ëŠ” ì œê±°í•˜ì—¬ ìŠ¤íƒ€ì¼ ì ìš©
                    if (checkbox.checked) {
                        li.classList.add('selected');
                    } else {
                        li.classList.remove('selected');
                    }
                });
            });
        });*/

    function regdate() {
        var now = new Date();
        var year = now.getFullYear();
        var month = String(now.getMonth() + 1).padStart(2, '0');
        var day = String(now.getDate()).padStart(2, '0');
        var hours = String(now.getHours()).padStart(2, '0');
        var minutes = String(now.getMinutes()).padStart(2, '0');
        var seconds = String(now.getSeconds()).padStart(2, '0');
        // return year + '-' + month + '-' + day + ' ' + hours + ':' + minutes + ':' + seconds;

        document.getElementById("post_regdate").value = year + '-' + month + '-' + day + ' ' + hours + ':' + minutes + ':' + seconds;
    }

</script>


<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ initMap í•¨ìˆ˜ ì‹¤í–‰
    window.onload = function () {
        initializeMap();
    };
    // ì§€ë„ ê´€ë ¨ í•¨ìˆ˜
    var map; // ì§€ë„ ê°ì²´ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
    var marker; // ë§ˆì»¤ ê°ì²´ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜

    // ì£¼ì†Œë¥¼ ê²€ìƒ‰í•˜ì—¬ ì§€ë„ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
    function initializeMap() {
        var addr = document.getElementById('location').value; // ì…ë ¥ëœ ì£¼ì†Œ ê°€ì ¸ì˜¤ê¸°
        var geocoder = new kakao.maps.services.Geocoder(); // ì£¼ì†Œ ê²€ìƒ‰ ê°ì²´ ìƒì„±


        // ì£¼ì†Œ ê²€ìƒ‰ ìš”ì²­
        geocoder.addressSearch(addr, function (result, status) {
            if (status === kakao.maps.services.Status.OK) {
                // ê²€ìƒ‰ëœ ì£¼ì†Œì˜ ì¢Œí‘œë¡œ ì§€ë„ ì´ˆê¸°í™”
                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                // ì§€ë„ ì˜µì…˜ ì„¤ì •
                var mapContainer = document.getElementById('map');
                var mapOptions = {
                    center: coords, // ì§€ë„ ì¤‘ì‹¬ ì¢Œí‘œ ì„¤ì •
                    level: 5// ì§€ë„ í™•ëŒ€ ìˆ˜ì¤€ ì„¤ì •
                };
                // ì§€ë„ ê°ì²´ ìƒì„±
                map = new kakao.maps.Map(mapContainer, mapOptions);

                // ìƒˆë¡œìš´ ë§ˆì»¤ ìƒì„±
                marker = new kakao.maps.Marker({
                    position: coords,
                    map: map
                });
            }
        });
    }
</script>


</body>
</html>
